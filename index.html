<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Tajawal,Arial;background:#f2f4f7;margin:0}
header{background:#2196f3;color:#fff;text-align:center;padding:10px}
header img{width:55px;border-radius:50%}
.container{padding:10px}
input,button{padding:6px;border-radius:5px;border:1px solid #ccc}
button{background:#2196f3;color:#fff;border:none}
.row{background:#fff;padding:8px;margin-bottom:6px;border-radius:6px;
display:flex;justify-content:space-between;align-items:center}
.actions button{margin-right:3px}
.hidden{display:none}
.counter{margin:6px 0;font-weight:bold}
.photo{width:90px;border-radius:6px}
</style>
</head>

<body>

<header>
  <img src="./logo.png"><br>
  Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·
</header>

<div class="container">

<button onclick="toggleForm()">â• Ø¥Ø¶Ø§ÙØ© Ø£Ø³ØªØ§Ø°</button>
<input id="search" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ" oninput="render()">

<div class="counter" id="count"></div>

<!-- Ù†Ù…ÙˆØ°Ø¬ -->
<div id="form" class="hidden">
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">
<input id="birth" placeholder="ØªØ§Ø±ÙŠØ® ÙˆÙ…Ø­Ù„ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
<input id="nid" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ">
<input id="join" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚">
<input id="branch" placeholder="Ø§Ù„ÙØ±Ø¹">
<input id="skill" placeholder="Ø§Ù„ÙƒÙØ§Ø¡Ø©">
<input type="file" id="photo">
<button onclick="save()">ğŸ’¾ Ø­ÙØ¸</button>
</div>

<div id="list"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
let editIndex=null;

function getData(){
 return JSON.parse(localStorage.getItem("teachers")||"[]");
}

function save(){
 let r=new FileReader();
 let f=photo.files[0];
 r.onload=()=>{
  let d=getData();
  let o={name:name.value,birth:birth.value,nid:nid.value,
  join:join.value,branch:branch.value,skill:skill.value,photo:r.result};
  editIndex===null?d.push(o):d[editIndex]=o;
  localStorage.setItem("teachers",JSON.stringify(d));
  editIndex=null; toggleForm(); render();
 }
 if(f) r.readAsDataURL(f); else r.onload();
}

function render(){
 let q=search.value||"";
 let d=getData().filter(t=>t.name.includes(q)||t.nid.includes(q));
 list.innerHTML="";
 count.innerText="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©: "+d.length;
 d.forEach((t,i)=>{
  list.innerHTML+=`
  <div class="row">
   <div>${i+1} - ${t.name}</div>
   <div class="actions">
    <button onclick="view(${i})">Ø¹Ø±Ø¶</button>
    <button onclick="edit(${i})">âœï¸</button>
    <button onclick="del(${i})">ğŸ—‘</button>
   </div>
  </div>`;
 });
}

function view(i){
 let t=getData()[i];
 let div=document.createElement("div");
 div.style.background="#fff";div.style.padding="10px";
 div.innerHTML=`
 <h3>${t.name}</h3>
 <p>Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ${t.birth}</p>
 <p>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ: ${t.nid}</p>
 <p>Ø§Ù„ØªØ­Ø§Ù‚: ${t.join}</p>
 <p>Ø§Ù„ÙØ±Ø¹: ${t.branch}</p>
 <p>Ø§Ù„ÙƒÙØ§Ø¡Ø©: ${t.skill}</p>
 <img class="photo" src="${t.photo}">
 <br><br><button onclick="pdf(this.parentNode)">PDF</button>`;
 document.body.appendChild(div);
}

function pdf(el){
 html2canvas(el).then(c=>{
  let pdf=new jspdf.jsPDF();
  pdf.addImage(c.toDataURL(),"PNG",10,10,190,0);
  pdf.save("Ø§Ø³ØªØ§Ø°.pdf");
 });
}

function edit(i){
 let t=getData()[i];
 name.value=t.name; birth.value=t.birth; nid.value=t.nid;
 join.value=t.join; branch.value=t.branch; skill.value=t.skill;
 editIndex=i; toggleForm();
}

function del(i){
 let d=getData(); d.splice(i,1);
 localStorage.setItem("teachers",JSON.stringify(d));
 render();
}

function toggleForm(){
 form.classList.toggle("hidden");
}

render();
</script>
</body>
</html>
