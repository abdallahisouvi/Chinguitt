<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Tahoma, Arial;
  background: #f4f6f8;
  margin: 0;
}
header {
  background: #2196f3;
  color: white;
  padding: 10px;
  text-align: center;
}
header img {
  width: 60px;
  border-radius: 50%;
}
.container {
  padding: 10px;
}
button {
  background: #2196f3;
  color: white;
  border: none;
  padding: 6px 10px;
  border-radius: 5px;
  margin: 2px;
}
input {
  width: 100%;
  padding: 6px;
  margin-bottom: 6px;
}
.card {
  background: white;
  padding: 8px;
  margin-bottom: 6px;
  border-radius: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.counter {
  margin: 8px 0;
  font-weight: bold;
}
.hidden { display: none; }
img.photo {
  width: 100px;
  border-radius: 6px;
}
</style>
</head>

<body>

<header>
  <img src="./logo.png">
  <div>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</div>
</header>

<div class="container">

<button onclick="showForm()">â• Ø¥Ø¶Ø§ÙØ© Ø£Ø³ØªØ§Ø°</button>
<button onclick="render()">ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©</button>

<div class="counter" id="count"></div>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
<div id="form" class="hidden">
  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">
  <input id="birth" placeholder="ØªØ§Ø±ÙŠØ® ÙˆÙ…Ø­Ù„ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
  <input id="nid" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ">
  <input id="join" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚">
  <input id="branch" placeholder="Ø§Ù„ÙØ±Ø¹">
  <input id="skill" placeholder="Ø§Ù„ÙƒÙØ§Ø¡Ø©">
  <input type="file" id="photo">
  <button onclick="save()">ğŸ’¾ Ø­ÙØ¸</button>
</div>

<!-- Ø§Ù„Ù„Ø§Ø¦Ø­Ø© -->
<div id="list"></div>

</div>

<!-- Ù…ÙƒØªØ¨Ø§Øª PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
let editIndex = null;

function getData(){
  return JSON.parse(localStorage.getItem("teachers") || "[]");
}

function save(){
  let reader = new FileReader();
  let file = document.getElementById("photo").files[0];

  reader.onload = function(){
    let data = getData();
    let obj = {
      name: name.value,
      birth: birth.value,
      nid: nid.value,
      join: join.value,
      branch: branch.value,
      skill: skill.value,
      photo: reader.result
    };

    if(editIndex === null) data.push(obj);
    else data[editIndex] = obj;

    localStorage.setItem("teachers", JSON.stringify(data));
    editIndex = null;
    document.getElementById("form").classList.add("hidden");
    render();
  };

  if(file) reader.readAsDataURL(file);
  else reader.onload();
}

function render(){
  let data = getData();
  list.innerHTML = "";
  count.innerText = "Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©: " + data.length;

  data.forEach((t,i)=>{
    list.innerHTML += `
    <div class="card">
      <div>${i+1}. ${t.name}</div>
      <div>
        <button onclick="view(${i})">Ø¹Ø±Ø¶</button>
        <button onclick="edit(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button onclick="del(${i})">Ø­Ø°Ù</button>
      </div>
    </div>`;
  });
}

function view(i){
  let t = getData()[i];
  let box = document.createElement("div");
  box.style.background = "white";
  box.style.padding = "10px";
  box.innerHTML = `
    <h3>${t.name}</h3>
    <p>Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ${t.birth}</p>
    <p>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ: ${t.nid}</p>
    <p>Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚: ${t.join}</p>
    <p>Ø§Ù„ÙØ±Ø¹: ${t.branch}</p>
    <p>Ø§Ù„ÙƒÙØ§Ø¡Ø©: ${t.skill}</p>
    <img class="photo" src="${t.photo}">
    <br><br>
    <button onclick="exportPDF(this.parentNode)">ğŸ“„ PDF</button>
  `;
  document.body.appendChild(box);
}

function exportPDF(el){
  html2canvas(el).then(canvas=>{
    const pdf = new jspdf.jsPDF();
    pdf.addImage(canvas.toDataURL("image/png"), "PNG", 10, 10, 190, 0);
    pdf.save("Ø§Ø³ØªØ§Ø°.pdf");
  });
}

function edit(i){
  let t = getData()[i];
  name.value = t.name;
  birth.value = t.birth;
  nid.value = t.nid;
  join.value = t.join;
  branch.value = t.branch;
  skill.value = t.skill;
  editIndex = i;
  showForm();
}

function del(i){
  let d = getData();
  d.splice(i,1);
  localStorage.setItem("teachers", JSON.stringify(d));
  render();
}

function showForm(){
  document.getElementById("form").classList.toggle("hidden");
}

render();
</script>

</body>
</html>
