<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Tahoma,Arial;background:#f4f6f8;margin:0}
header{background:#2196f3;color:#fff;text-align:center;padding:10px}
header img{width:60px;border-radius:50%}
.container{padding:10px}
button{background:#2196f3;color:#fff;border:none;padding:6px 10px;border-radius:5px;margin:2px}
input{width:100%;padding:6px;margin-bottom:6px}
.card{background:#fff;padding:8px;margin-bottom:6px;border-radius:6px;
display:flex;justify-content:space-between;align-items:center}
.hidden{display:none}
.counter{margin:8px 0;font-weight:bold}
.photo{width:100px;border-radius:6px}
</style>
</head>

<body>

<header>
  <img src="logo.png">
  <div>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</div>
</header>

<div class="container">

<button id="btnAdd">â• Ø¥Ø¶Ø§ÙØ© Ø£Ø³ØªØ§Ø°</button>
<button id="btnList">ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©</button>

<input id="search" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ">

<div class="counter" id="count"></div>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
<div id="form" class="hidden">
  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">
  <input id="birth" placeholder="ØªØ§Ø±ÙŠØ® ÙˆÙ…Ø­Ù„ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
  <input id="nid" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ">
  <input id="join" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚">
  <input id="branch" placeholder="Ø§Ù„ÙØ±Ø¹">
  <input id="skill" placeholder="Ø§Ù„ÙƒÙØ§Ø¡Ø©">
  <input type="file" id="photo">
  <button type="button" id="btnSave">ğŸ’¾ Ø­ÙØ¸</button>
  <button type="button" id="btnClose">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<!-- Ø§Ù„Ù„Ø§Ø¦Ø­Ø© -->
<div id="list" class="hidden"></div>

</div>

<script>
/* Ø¹Ù†Ø§ØµØ± */
const form = document.getElementById("form");
const list = document.getElementById("list");
const count = document.getElementById("count");
const search = document.getElementById("search");

const nameI = document.getElementById("name");
const birthI = document.getElementById("birth");
const nidI = document.getElementById("nid");
const joinI = document.getElementById("join");
const branchI = document.getElementById("branch");
const skillI = document.getElementById("skill");
const photoI = document.getElementById("photo");

let editIndex = null;

/* Ø£Ø¯ÙˆØ§Øª */
function getData(){
  return JSON.parse(localStorage.getItem("teachers") || "[]");
}

function saveData(data){
  localStorage.setItem("teachers", JSON.stringify(data));
}

/* Ø£Ø²Ø±Ø§Ø± */
document.getElementById("btnAdd").onclick = () => {
  form.classList.remove("hidden");
  list.classList.add("hidden");
};

document.getElementById("btnList").onclick = () => {
  form.classList.add("hidden");
  list.classList.remove("hidden");
  render();
};

document.getElementById("btnClose").onclick = () => {
  clearForm();
  form.classList.add("hidden");
};

document.getElementById("btnSave").onclick = () => {
  saveTeacher();
};

search.oninput = render;

/* Ø§Ù„Ø­ÙØ¸ (Ù…ÙØµØ­Ù‘Ø­) */
function saveTeacher(){
  let data = getData();

  let teacher = {
    name: nameI.value.trim(),
    birth: birthI.value.trim(),
    nid: nidI.value.trim(),
    join: joinI.value.trim(),
    branch: branchI.value.trim(),
    skill: skillI.value.trim(),
    photo: ""
  };

  if(photoI.files[0]){
    let r = new FileReader();
    r.onload = () => {
      teacher.photo = r.result;
      data.push(teacher);
      finishSave(data);
    };
    r.readAsDataURL(photoI.files[0]);
  } else {
    data.push(teacher);
    finishSave(data);
  }
}

function finishSave(data){
  saveData(data);
  clearForm();
  form.classList.add("hidden");
  list.classList.remove("hidden");
  render();
}

/* ØªÙØ±ÙŠØº Ø§Ù„Ø®Ø§Ù†Ø§Øª */
function clearForm(){
  nameI.value="";
  birthI.value="";
  nidI.value="";
  joinI.value="";
  branchI.value="";
  skillI.value="";
  photoI.value="";
}

/* Ø¹Ø±Ø¶ Ø§Ù„Ù„Ø§Ø¦Ø­Ø© */
function render(){
  let q = search.value || "";
  let data = getData().filter(t =>
    t.name.includes(q) || t.nid.includes(q)
  );

  list.innerHTML="";
  count.innerText="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©: "+data.length;

  data.forEach((t,i)=>{
    list.innerHTML += `
    <div class="card">
      <div>${i+1} - ${t.name}</div>
      <div>
        <button onclick="alert('Ø§Ù„Ø¹Ø±Ø¶ Ù„Ø§Ø­Ù‚Ù‹Ø§')">Ø¹Ø±Ø¶</button>
        <button onclick="del(${i})">ğŸ—‘</button>
      </div>
    </div>`;
  });
}

function del(i){
  let d = getData();
  d.splice(i,1);
  saveData(d);
  render();
}
</script>

</body>
</html>
