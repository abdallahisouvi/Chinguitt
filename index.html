<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Tahoma,Arial;background:#f4f6f8;margin:0}
header{background:#2196f3;color:#fff;text-align:center;padding:10px}
header img{width:60px;border-radius:50%}
.container{padding:10px}
button{background:#2196f3;color:#fff;border:none;padding:6px 10px;border-radius:5px;margin:2px}
input{width:100%;padding:6px;margin-bottom:6px}
.card{background:#fff;padding:8px;margin-bottom:6px;border-radius:6px;
display:flex;justify-content:space-between;align-items:center}
.counter{margin:8px 0;font-weight:bold}
.hidden{display:none}
.photo{width:100px;border-radius:6px}
#viewer{position:fixed;top:0;left:0;right:0;bottom:0;
background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
#viewer .box{background:#fff;padding:15px;border-radius:8px;max-width:90%}
</style>
</head>

<body>

<header>
  <img src="./logo.png">
  <div>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</div>
</header>

<div class="container">
<button onclick="toggleForm()">â• Ø¥Ø¶Ø§ÙØ© Ø£Ø³ØªØ§Ø°</button>
<button onclick="render()">ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©</button>

<div class="counter" id="count"></div>

<!-- Ù†Ù…ÙˆØ°Ø¬ -->
<div id="form" class="hidden">
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">
<input id="birth" placeholder="ØªØ§Ø±ÙŠØ® ÙˆÙ…Ø­Ù„ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
<input id="nid" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ">
<input id="join" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚">
<input id="branch" placeholder="Ø§Ù„ÙØ±Ø¹">
<input id="skill" placeholder="Ø§Ù„ÙƒÙØ§Ø¡Ø©">
<input type="file" id="photo">
<button onclick="save()">ğŸ’¾ Ø­ÙØ¸</button>
</div>

<div id="list"></div>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø±Ø¶ -->
<div id="viewer">
  <div class="box" id="viewerBox"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
let editIndex = null;

function getData(){
  return JSON.parse(localStorage.getItem("teachers") || "[]");
}

function save(){
  let data = getData();
  let oldPhoto = editIndex !== null ? data[editIndex].photo : "";

  let file = photo.files[0];
  if(file){
    let reader = new FileReader();
    reader.onload = () => finishSave(reader.result);
    reader.readAsDataURL(file);
  }else{
    finishSave(oldPhoto);
  }
}

function finishSave(photoData){
  let data = getData();
  let obj = {
    name: name.value.trim(),
    birth: birth.value.trim(),
    nid: nid.value.trim(),
    join: join.value.trim(),
    branch: branch.value.trim(),
    skill: skill.value.trim(),
    photo: photoData || ""
  };

  if(editIndex === null) data.push(obj);
  else data[editIndex] = obj;

  localStorage.setItem("teachers", JSON.stringify(data));
  editIndex = null;
  clearForm();
  render();
}

function render(){
  let data = getData();
  list.innerHTML = "";
  count.innerText = "Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©: " + data.length;

  data.forEach((t,i)=>{
    list.innerHTML += `
    <div class="card">
      <div>${i+1}. ${t.name}</div>
      <div>
        <button onclick="view(${i})">Ø¹Ø±Ø¶</button>
        <button onclick="edit(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button onclick="del(${i})">Ø­Ø°Ù</button>
      </div>
    </div>`;
  });
}

function view(i){
  let t = getData()[i];
  viewerBox.innerHTML = `
    <h3>${t.name}</h3>
    <p>Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ${t.birth}</p>
    <p>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ: ${t.nid}</p>
    <p>Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚: ${t.join}</p>
    <p>Ø§Ù„ÙØ±Ø¹: ${t.branch}</p>
    <p>Ø§Ù„ÙƒÙØ§Ø¡Ø©: ${t.skill}</p>
    ${t.photo ? `<img class="photo" src="${t.photo}">` : ""}
    <br><br>
    <button onclick="exportPDF()">ğŸ“„ PDF</button>
    <button onclick="closeView()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
  `;
  viewer.style.display="flex";
}

function closeView(){
  viewer.style.display="none";
}

function exportPDF(){
  html2canvas(viewerBox).then(canvas=>{
    let pdf = new jspdf.jsPDF();
    pdf.addImage(canvas.toDataURL("image/png"),"PNG",10,10,190,0);
    pdf.save("Ø§Ø³ØªØ§Ø°.pdf");
  });
}

function edit(i){
  let t = getData()[i];
  name.value = t.name;
  birth.value = t.birth;
  nid.value = t.nid;
  join.value = t.join;
  branch.value = t.branch;
  skill.value = t.skill;
  editIndex = i;
  toggleForm(true);
}

function del(i){
  let d = getData();
  d.splice(i,1);
  localStorage.setItem("teachers", JSON.stringify(d));
  render();
}

function toggleForm(show){
  form.classList.toggle("hidden", show===false);
}

function clearForm(){
  name.value=birth.value=nid.value=join.value=branch.value=skill.value="";
  pho
