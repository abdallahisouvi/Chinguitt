<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  font-family: Arial;
  background:#f2f5f7;
  margin:0;
}
header{
  background:#2196f3;
  color:#fff;
  padding:10px;
  text-align:center;
}
header img{
  width:60px;
  display:block;
  margin:0 auto 5px;
}
.container{padding:10px}
button{
  background:#2196f3;
  color:#fff;
  border:none;
  padding:8px 12px;
  border-radius:6px;
}
input{
  width:100%;
  padding:8px;
  margin:5px 0;
}
.card{
  background:#fff;
  border-radius:10px;
  padding:10px;
  margin-bottom:10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.name{
  font-size:18px;
  font-weight:bold;
}
.count{
  color:#888;
}
.hidden{display:none}
</style>
</head>

<body>

<header>
  <img src="logo.png">
  <h3>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·</h3>
</header>

<div class="container">

<button onclick="showForm()">â• Ø¥Ø¶Ø§ÙØ© Ø£Ø³ØªØ§Ø°</button>
<button onclick="showList()">ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©</button>

<!-- Ù†Ù…ÙˆØ°Ø¬ -->
<div id="form" class="hidden">
  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">
  <input id="nationalId" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ">
  <input id="branch" placeholder="Ø§Ù„ÙØ±Ø¹">
  <input type="file" id="image">
  <button onclick="save()">Ø­ÙØ¸</button>
</div>

<!-- Ø§Ù„Ø¨Ø­Ø« -->
<div id="listBox" class="hidden">
  <input placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù…" onkeyup="search(this.value)">
  <div id="list"></div>
</div>

</div>

<script>
let teachers=JSON.parse(localStorage.getItem("teachers")||"[]");

function showForm(){
form.classList.remove("hidden");
listBox.classList.add("hidden");
}

function showList(){
render(teachers);
listBox.classList.remove("hidden");
form.classList.add("hidden");
}

function save(){
const r=new FileReader();
r.onload=()=>{
teachers.push({
name:name.value,
nationalId:nationalId.value,
branch:branch.value,
image:r.result
});
localStorage.setItem("teachers",JSON.stringify(teachers));
name.value=nationalId.value=branch.value="";
showList();
};
if(image.files[0]) r.readAsDataURL(image.files[0]);
else r.onload();
}

function render(arr){
list.innerHTML="";
arr.forEach((t,i)=>{
list.innerHTML+=`
<div class="card">
  <div>
    <div class="name">${t.name}</div>
    <div class="count">Ø§Ù„Ø±Ù‚Ù…: ${i+1}</div>
  </div>
  <button onclick="singlePdf(${i})">Ø¹Ø±Ø¶</button>
</div>`;
});
}

function search(v){
render(teachers.filter(t=>t.name.includes(v)||t.nationalId.includes(v)));
}

function singlePdf(i){
const {jsPDF}=window.jspdf;
const t=teachers[i];
const pdf=new jsPDF();
pdf.text("ØªÙ‚Ø±ÙŠØ± Ø£Ø³ØªØ§Ø° â€“ Ù…Ø¹Ù‡Ø¯ Ø´Ù†Ù‚ÙŠØ·",10,10);
if(t.image) pdf.addImage(t.image,"JPEG",150,20,40,40);
pdf.text("Ø§Ù„Ø§Ø³Ù…: "+t.name,10,40);
pdf.text("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ: "+t.nationalId,10,50);
pdf.text("Ø§Ù„ÙØ±Ø¹: "+t.branch,10,60);
pdf.save(t.name+".pdf");
}
</script>

</body>
</html>
